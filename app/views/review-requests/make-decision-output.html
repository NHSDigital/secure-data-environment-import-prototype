{% extends 'layout.html' %}

{% block header %}
  {{ header({
    service: {
      text: 'Manage import and output requests',
      href: "/"
    }
  }) }}
{% endblock %}


{% from 'breadcrumb/macro.njk' import breadcrumb %}
{% from 'button/macro.njk' import button %}

{% set mainClasses = "nhsuk-main-wrapper--s" %}

{% block beforeContent %}
  {% from 'back-link/macro.njk' import backLink %}

{{ backLink({
  href: "output-requests",
  text: "Back"
}) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-width-container">

      <h1 class="nhsuk-heading-l">Make a decision on request 90</h1>
      
{% from "summary-list/macro.njk" import summaryList %}

{{ summaryList({
  rows: [
    {
      key: {
        text: "File name"
      },
      value: {
        html: "<a class=\"nhsuk-link\" href=\"/download/data.txt\">data.txt</a>"
      
      }
    },
    {
      key: {
        text: "Priority"
      },
      value: {
        html: '<span class="nhsuk-tag nhsuk-tag--yellow">Fast track</span>'
      }
    },
    {
      key: {
        text: "Requested by"
      },
      value: {
        html: "example@nhs.net"
      }
    },
    {
      key: {
        text: "Contextual information"
      },
      value: {
        html: "<p>Example contextual information</p>"
      }
    }
  ]
}) }}

{% from "warning-callout/macro.njk" import warningCallout %}

{{ warningCallout({
  heading: "Auto check results",
  text: "The output request was not a csv file type - no result."
}) }}

{% from "checkboxes/macro.njk" import checkboxes %}

{{ checkboxes({
  idPrefix: "example",
  name: "example",
  fieldset: {
    legend: {
      text: "What did you check?",
      classes: "nhsuk-label--m",
      size: "l",
      isPageHeading: false
    }
  },
  hint: {
    text: ""
  },
  items: [
    {
      value: "numbers",
      text: "Numbers"
    },
    {
      value: "text",
      text: "Text"
    },
    {
      value: "code",
      text: "Code"
    },
    {
      value: "other",
      text: "Other"
    }
  ]
}) }}

{% set otherReasonInput %}
  {% from "textarea/macro.njk" import textarea %}
  {{ textarea({
    id: "otherReason",
    name: "otherReason",
    label: {
      text: "Provide further information"
    },
    rows: 5
  }) }}
{% endset %}



{% from "radios/macro.njk" import radios %}

{{ radios({
  idPrefix: "decision",
  name: "decision",
  fieldset: {
    legend: {
      text: "Your decision",
      size: "l",
      classes: "nhsuk-label--m",
      isPageHeading: true
    }
  },
  items: [
    {
      value: "approve",
      text: "Approve"
    },
    {
      value: "reject",
      text: "Reject"
    }
  ]
}) }}

<div id="rejectionReasonsContainer" style="display: none; margin-top: 24px;">
  {% from "checkboxes/macro.njk" import checkboxes %}
  {% from "textarea/macro.njk" import textarea %}
{% from "textarea/macro.njk" import textarea %}

{% set emailHtml %}
  {{ textarea({
    id: "email",
    name: "email",
    classes: "nhsuk-u-width-two-thirds",
    label: {
      text: "Enter further information about the rejection"
    }
  }) }}
{% endset -%}

  {{ checkboxes({
    idPrefix: "rejectionReasons",
    name: "rejectionReasons",
    fieldset: {
      legend: {
        text: "Why are you rejecting this request?",
        size: "m",
        isPageHeading: false
      }
    },
    items: [
      {
        value: "unrounded",
        text: "Unrounded counts"
      },
      {
        value: "noContext",
        text: "Not enough context provided"
      },
      {
        value: "countUnder10",
        text: "Counts under 10"
      },
      {
        value: "rowCount",
        text: "Row count exceeded"
      },
      {
        value: "fileType",
        text: "File type not allowed"
      },
      {
        value: "pii",
        text: "Contained personally identifiable information"
      },
      {
        value: "other",
        text: "Other or add further information",
        conditional: {
          html: emailHtml
        }
      }
    ]
  }) }}
</div>

{% from "button/macro.njk" import button %}

<div class="nhsuk-button-group">
  {{ button({
    text: "Submit decision",
    href: "output-requests"
  }) }}

  <a href="#" class="nhsuk-link">Cancel</a>
</div>

      

    </div>
  </div>
{% endblock %}