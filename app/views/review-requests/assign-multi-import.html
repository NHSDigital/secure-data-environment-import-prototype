{% extends 'layout.html' %}

{% block header %}
  {{ header({
    service: {
      text: 'Manage import and output requests',
      href: "/"
    }
  }) }}
{% endblock %}

{% from 'breadcrumb/macro.njk' import breadcrumb %}
{% from 'button/macro.njk' import button %}

{% set mainClasses = "nhsuk-main-wrapper--s" %}

{% block beforeContent %}
  {% from 'back-link/macro.njk' import backLink %}

{{ backLink({
  href: "import-requests#past-week",
  text: "Back"
}) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-width-container">

      <h1 class="nhsuk-heading-l">Assign to an import checker (3)</h1>
      
{% from "summary-list/macro.njk" import summaryList %}

{{ table({
    responsive: false,
    panel: false,
    caption: "",
    firstCellIsHeader: false,
    head: [
      { text: "ID" },
      { text: "File name", format: "text" },
      { text: "Type" },
      { text: "Request date", format: "text" },
      { text: "Requested by", format: "text" },
      { text: "Agreement", format: "text" }
    ],
    rows: [
      [
        { text: "1001" },
        { text: 'patient-1001.json' },
        { text: "Code" },
      
        { text: "2025-11-09 14:22" },
        { text: "research.data@oxford.ac.uk" },
        { text: "DSA-4829-1503" }
      ],
      [
        { text: "1002" },
        { text: 'export-wardB-1002.zip' },
        { text: "Code" },
        
        { text: "2025-11-09 11:03" },
        { text: "data.access@imperial.ac.uk" },
        { text: "DSA-0391-7742" }
      ],
      [
        { text: "1003" },
        { text: 'clinic-report-1003.csv' },
        { text: "Reference data" },
        { text: "2025-11-08 16:45" },
        { text: "info@ucl-research.ac.uk" },
        { text: "DSA-6612-3008" }
      ]
    ]
    
  }) }}

{% from "checkboxes/macro.njk" import checkboxes %}

<form>


{% set otherReasonInput %}
  {% from "textarea/macro.njk" import textarea %}
  {{ textarea({
    id: "otherReason",
    name: "otherReason",
    label: {
      text: "Provide further information"
    },
    rows: 5
  }) }}
{% endset %}

{% from "radios/macro.njk" import radios %}

{{ radios({
  idPrefix: "decision",
  name: "Choose an output checker",
  fieldset: {
    legend: {
      text: "Choose an output checker",
      size: "l",
      classes: "nhsuk-label--m",
      isPageHeading: true
    }
  },
  items: [
    {
      value: "approved",
      text: "David King (you)"
    },
    {
      value: "rejected",
      text: "Someone else"
    }
  ]
}) }}

<div id="rejectionReasonsContainer" style="display: none; margin-top: 24px;">
  {% from "checkboxes/macro.njk" import checkboxes %}
  {% from "textarea/macro.njk" import textarea %}
{% from "textarea/macro.njk" import textarea %}

{% set emailHtml %}
  {{ textarea({
    id: "email",
    name: "email",
    classes: "nhsuk-u-width-two-thirds",
    label: {
      text: "Enter further information about the rejection"
    }
  }) }}
{% endset -%}

  {{ checkboxes({
    idPrefix: "rejectionReasons",
    name: "rejectionReasons",
    fieldset: {
      legend: {
        text: "Why are you rejecting this request?",
        size: "m",
        isPageHeading: false
      }
    },
    items: [
      
      {
        value: "pii",
        text: "Contained personally identifiable information"
      },
      {
        value: "other",
        text: "Other or add further information",
        conditional: {
          html: emailHtml
        }
      }
    ]
  }) }}
</div>

{% from "button/macro.njk" import button %}

<div class="nhsuk-button-group">
  {{ button({
    text: "Assign",
    href: "import-requests"
  }) }}
</div>
</form>

      

    </div>
  </div>
{% endblock %}